<!DOCTYPE html><html lang="en"><head><title>a-transcluded-required-directive/a-transcluded-required-directive</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="a-transcluded-required-directive/a-transcluded-required-directive"><meta name="groc-project-path" content="a-transcluded-required-directive/a-transcluded-required-directive.coffee"><meta name="groc-github-url" content="https://github.com/OlenDavis/google-maps-a-directive"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/OlenDavis/google-maps-a-directive/blob/master/a-transcluded-required-directive/a-transcluded-required-directive.coffee">a-transcluded-required-directive/a-transcluded-required-directive.coffee</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><h1 id="directive-basics">Directive Basics</h1>

<h2 id="a-transcluded-required-directive">A Transcluded Required Directive</h2></div></div><div class="code"><div class="wrapper"><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span> <span class="s">&#39;aModule&#39;</span><span class="p">,</span> <span class="p">[</span> <span class="s">&#39;ng&#39;</span> <span class="p">]</span> <span class="p">).</span><span class="nx">directive</span><span class="p">(</span> <span class="s">&#39;aTranscludedRequiredDirective&#39;</span><span class="p">,</span> <span class="nf">-&gt;</span>

  <span class="nv">scope:</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This is just how many directives transcluding this required directive to render.</p></div></div><div class="code"><div class="wrapper">    <span class="nv">thisMany: </span><span class="s">&#39;=?aTranscludedRequiredDirective&#39;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>This is what makes the $transclude function available to the controller.</p></div></div><div class="code"><div class="wrapper">  <span class="nv">transclude: </span><span class="kc">yes</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Note that we don't need the $attrs or controllerOrControllers 'cause <em>we're</em> not requiring
another directive</p></div></div><div class="code"><div class="wrapper">  <span class="nv">link: </span><span class="nf">( $scope, $element ) -&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>We $watch the thisMany value cast as a number</p></div></div><div class="code"><div class="wrapper">    <span class="nx">$scope</span><span class="p">.</span><span class="nx">$watch</span> <span class="s">&#39;thisMany | number&#39;</span><span class="p">,</span> <span class="nf">( thisMany ) -&gt;</span>
      <span class="nv">$scope.soMany = </span><span class="k">new</span> <span class="nb">Array</span><span class="p">()</span>

      <span class="nv">thisMany = </span><span class="nx">thisMany</span> <span class="o">or</span> <span class="mi">0</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Build an array of numbers for soMany, from 1 to the value of thisMany</p></div></div><div class="code"><div class="wrapper">      <span class="nx">$scope</span><span class="p">.</span><span class="nx">soMany</span><span class="p">.</span><span class="nx">push</span> <span class="nx">i</span> <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span> <span class="mi">1</span> <span class="p">..</span> <span class="nx">thisMany</span> <span class="p">]</span>

      <span class="nx">debugger</span>

  <span class="nv">controller: </span><span class="nf">( $transclude ) -&gt;</span>
    <span class="nv">$transclude: </span><span class="nx">$transclude</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>Here, we just do an ng-repeat on the soMany array, and for each, use the
transcludeTheRequiredDirective to render the transclusion of this directive.</p></div></div><div class="code"><div class="wrapper">  <span class="nv">template: </span><span class="s">&#39;&#39;&#39;</span>
<span class="s">    &lt;div&gt;</span>
<span class="s">      &lt;div</span>
<span class="s">        transclude-the-required-directive</span>
<span class="s">        ng-repeat=&quot;each in soMany&quot;</span>
<span class="s">      &gt;&lt;/div&gt;</span>
<span class="s">    &lt;/div&gt;</span>
<span class="s">  &#39;&#39;&#39;</span>

<span class="p">).</span><span class="nx">directive</span> <span class="s">&#39;transcludeTheRequiredDirective&#39;</span><span class="p">,</span> <span class="nf">-&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>So, we require aTranscludedRequiredDirective (optionally) from an ancestor element.</p></div></div><div class="code"><div class="wrapper">  <span class="nv">require: </span><span class="s">&#39;^?aTranscludedRequiredDirective&#39;</span>

  <span class="nv">link: </span><span class="nf">( $scope, $element, $attrs, aTranscludedRequiredDirectiveController ) -&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>And then we simply call the $transclude function (which is just a $compile'd link
function, having compiled the content HTML/template of the aTranscludedRequiredDirective
instance we require'd).</p></div></div><div class="code"><div class="wrapper">    <span class="nx">aTranscludedRequiredDirectiveController</span><span class="o">?</span><span class="p">.</span><span class="nx">$transclude</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nf">( $transcludedContent ) -&gt;</span></div></div></div><div class="segment"><div class="comments "><div class="wrapper"><p>And then simply append that content to this directive's element.</p></div></div><div class="code"><div class="wrapper">      <span class="nx">$element</span><span class="p">.</span><span class="nx">append</span> <span class="nx">$transcludedContent</span></div></div></div></div></body></html>